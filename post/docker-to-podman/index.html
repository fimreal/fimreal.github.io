<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>ä» CoreOS è¿ç§»åˆ° Fedora CoreOS ä¹‹ ç”¨ Podman ä»£æ›¿ Docker - é—²éš…</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv=cache-control content="no-transform"><meta http-equiv=cache-control content="no-siteapp"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=author content="Fimreal"><meta name=description content="ä» Docker è¿ç§»åˆ° Podman è®°å½•"><meta name=keywords content="Docker,Podman"><meta name=generator content="Hugo 0.103.1 with theme even"><link rel=canonical href=https://www.epurs.com/post/docker-to-podman/><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link href=/sass/main.min.520181dd342d9369197dd9e27d41b8f7108626419bf37348947efbbba4d9724c.css rel=stylesheet><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin=anonymous><meta property="og:title" content="ä» CoreOS è¿ç§»åˆ° Fedora CoreOS ä¹‹ ç”¨ Podman ä»£æ›¿ Docker"><meta property="og:description" content="ä» Docker è¿ç§»åˆ° Podman è®°å½•"><meta property="og:type" content="article"><meta property="og:url" content="https://www.epurs.com/post/docker-to-podman/"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-09-10T09:46:32+08:00"><meta property="article:modified_time" content="2021-10-15T10:50:09+08:00"><meta itemprop=name content="ä» CoreOS è¿ç§»åˆ° Fedora CoreOS ä¹‹ ç”¨ Podman ä»£æ›¿ Docker"><meta itemprop=description content="ä» Docker è¿ç§»åˆ° Podman è®°å½•"><meta itemprop=datePublished content="2021-09-10T09:46:32+08:00"><meta itemprop=dateModified content="2021-10-15T10:50:09+08:00"><meta itemprop=wordCount content="566"><meta itemprop=keywords content="Docker,Container,"><meta name=twitter:card content="summary"><meta name=twitter:title content="ä» CoreOS è¿ç§»åˆ° Fedora CoreOS ä¹‹ ç”¨ Podman ä»£æ›¿ Docker"><meta name=twitter:description content="ä» Docker è¿ç§»åˆ° Podman è®°å½•"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>é—²éš…</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><a href=/><li class=mobile-menu-item>ä¸»é¡µ</li></a><a href=/post/><li class=mobile-menu-item>å½’æ¡£</li></a><a href=/tags/><li class=mobile-menu-item>æ ‡ç­¾</li></a><a href=/categories/><li class=mobile-menu-item>åˆ†ç±»</li></a></ul></nav><div class=container id=mobile-panel><header id=header class=header><div class=logo-wrapper><a href=/ class=logo>é—²éš…</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=/>ä¸»é¡µ</a></li><li class=menu-item><a class=menu-item-link href=/post/>å½’æ¡£</a></li><li class=menu-item><a class=menu-item-link href=/tags/>æ ‡ç­¾</a></li><li class=menu-item><a class=menu-item-link href=/categories/>åˆ†ç±»</a></li></ul></nav></header><main id=main class=main><div class=content-wrapper><div id=content class=content><article class=post><header class=post-header><h1 class=post-title>ä» CoreOS è¿ç§»åˆ° Fedora CoreOS ä¹‹ ç”¨ Podman ä»£æ›¿ Docker</h1><div class=post-meta><span class=post-time>2021-09-10</span><div class=post-category><a href=/categories/docker/>Docker</a>
<a href=/categories/container/>Container</a></div><span class=more-meta>çº¦ 566 å­—</span>
<span class=more-meta>é¢„è®¡é˜…è¯» 2 åˆ†é’Ÿ</span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>æ–‡ç« ç›®å½•</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#docker-vs-podman>Docker VS Podman</a></li><li><a href=#ä½¿ç”¨-systemd-å¢å¼º-podman-å¯åŠ¨æœåŠ¡>ä½¿ç”¨ systemd å¢å¼º Podman å¯åŠ¨æœåŠ¡</a></li></ul></nav></div></div><div class=post-content><p>ä¹‹å‰ä¸ªäººæœåŠ¡å™¨ä¸€ç›´åœ¨ä½¿ç”¨ CoreOS æ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯ç”±äº CoreOS ç³»ç»Ÿåœæ›´å¤ªä¹…äº†ï¼ŒDocker ç‰ˆæœ¬å·²ç»è·Ÿä¸ä¸Šæ—¶ä»£æ­¥ä¼ï¼Œæ—¶ä¸æ—¶å°±å‡ºç°æ–°é•œåƒæ²¡æ³•å…¼å®¹çš„æƒ…å†µï¼Œé‚å†³å®šè¿ç§»è‡³ Fedora CoreOSï¼ŒåŒæ—¶å°è¯•ä½¿ç”¨ Podman æ›¿æ¢æ‰é€æ­¥è¢«ä¸šç•Œå†·è½çš„ Dockerã€‚</p><h2 id=docker-vs-podman>Docker VS Podman</h2><p>Podman æ˜¯ Redhat æ¨å‡ºçš„å®¹å™¨ç®¡ç†å·¥å…·ï¼Œè‡ªä» CoreOS è¢« Redhat æ”¶è´­ä¹‹åï¼Œrkt å°±è¢«æ›¿æ¢ä¸º Podmanï¼Œå’Œ Docker å¹¶å­˜é¢„åˆ¶äº CoreOS ç³»ç»Ÿå†…ã€‚</p><p>Podman å’Œ Docker æœ€å¤§çš„åŒºåˆ«å°±åœ¨äºæ‹‰èµ·å®¹å™¨çš„è¿‡ç¨‹ä¸åŒã€‚ç®€å•æ¥è¯´ï¼š</p><ul><li>Docker æ‹‰èµ·å®¹å™¨éœ€è¦å’Œ docker engine [ä¹Ÿå°±æ˜¯ <code>dockerd</code>] é€šä¿¡ï¼Œ<code>dockerd</code> æ¥æ”¶åˆ°ä¿¡æ¯åä¼šåˆ†åˆ«ç”¨åˆ° <code>containerd</code>å’Œ<code>docker-proxy</code>æ¥ä¾æ¬¡å®Œæˆåˆ›å»ºå®¹å™¨å’Œç½‘ç»œè½¬å‘é…ç½®ï¼Œ<code>containerd</code> ä¼šé€šè¿‡ <code>containerd-shim</code> å»è°ƒç”¨ OCI [<code>runC</code>]ï¼ŒOCI å®Œæˆå®¹å™¨åˆ›å»ºæ‹‰èµ·è¿›ç¨‹ã€‚</li><li>Podman æ²¡æœ‰ daemon è¿›ç¨‹å¯åŠ¨å®¹å™¨ä¼šç®€å•å¾ˆå¤šï¼Œä¸»è¦é€šè¿‡åˆ›å»º <code>conmon</code>è¿›ç¨‹æ¥åˆå§‹åŒ–å®¹å™¨ã€‚æ¯ä¸ªå®¹å™¨å¯åŠ¨éƒ½ä¼šä¼´ç”Ÿä¸€ä¸ª <code>conmon</code> è¿›ç¨‹ï¼Œæœ‰ç‚¹ç±»ä¼¼äº k8s POD çš„ pause å®¹å™¨ï¼Œä¿ç•™è¯¥è¿›ç¨‹å¯ä»¥ç”¨æ¥è·å–å®¹å™¨äº§ç”Ÿçš„<code>stdout</code>å’Œ<code>stderr</code>ã€‚</li></ul><h2 id=ä½¿ç”¨-systemd-å¢å¼º-podman-å¯åŠ¨æœåŠ¡>ä½¿ç”¨ systemd å¢å¼º Podman å¯åŠ¨æœåŠ¡</h2><p>REFï¼š</p><p><a href=https://access.redhat.com/documentation/zh-cn/red_hat_enterprise_linux/8/html/building_running_and_managing_containers/porting-containers-to-systemd-using-podman_building-running-and-managing-containers>çº¢å¸½8çš„å®¹å™¨æ•™ç¨‹</a></p><p><a href=https://docs.podman.io/en/latest/markdown/podman-run.1.html>Podman æ–‡æ¡£</a></p><p>é»˜è®¤ podman å¯ä»¥ç®¡ç†å®¹å™¨å¤±è´¥é‡å¯ï¼Œä½†æ˜¯å¦‚æœç³»ç»Ÿå‘ç”Ÿé‡å¯ï¼Œåˆ™ä¸ä¼šç”Ÿæ•ˆï¼Œéœ€è¦ä½¿ç”¨ systemd unit æ–‡ä»¶æ¥ä¿è¯æœåŠ¡å¼€æœºå¯åŠ¨ã€‚</p><p>ä¾‹å¦‚å¯åŠ¨å®¹å™¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>podman run -d --name cube --restart unless-stopped -p 10.88.0.1:4080:80 registry.cn-beijing.aliyuncs.com/sae-demo/kube:1.0
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨ systemd æ¥ç®¡ç†å¯åŠ¨ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># ç”Ÿæˆ systemd-unit é…ç½®</span>
</span></span><span class=line><span class=cl>podman generate systemd --name cube &gt; /etc/systemd/system/container-cube.service
</span></span><span class=line><span class=cl><span class=c1># é‡è½½ systemd</span>
</span></span><span class=line><span class=cl>systemctl daemon-reload
</span></span><span class=line><span class=cl><span class=c1># åœæ­¢ podman å¯åŠ¨çš„æœåŠ¡</span>
</span></span><span class=line><span class=cl>systemctl stop container-cube.service
</span></span><span class=line><span class=cl><span class=c1># é…ç½®å¼€æœºå¯åŠ¨ï¼ŒåŒæ—¶å¯åŠ¨å®¹å™¨</span>
</span></span><span class=line><span class=cl>systemctl <span class=nb>enable</span> container-cube.service --now
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å½“å‰æœåŠ¡çŠ¶æ€</span>
</span></span><span class=line><span class=cl>systemctl status container-cube.service
</span></span></code></pre></td></tr></table></div></div></div><footer class=post-footer><div class=post-tags><a href=/tags/docker/>Docker</a>
<a href=/tags/container/>Container</a></div><nav class=post-nav><a class=prev href=/post/fcos-fcct/><i class="iconfont icon-left"></i>
<span class="prev-text nav-default">ä» CoreOS è¿ç§»åˆ° Fedora CoreOS ä¹‹ ç”¨ fcct åˆå§‹åŒ– fcos</span>
<span class="prev-text nav-mobile">ä¸Šä¸€ç¯‡</span></a>
<a class=next href=/post/exposing-a-port-on-a-live-container/><span class="next-text nav-default">å¸®åŠ©å·²ç»è¿è¡Œçš„å®¹å™¨æš´éœ²ç«¯å£</span>
<span class="next-text nav-mobile">ä¸‹ä¸€ç¯‡</span>
<i class="iconfont icon-right"></i></a></nav></footer></article></div><div id=vcomments></div><script src=//cdn1.lncld.net/static/js/3.0.4/av-min.js></script>
<script src=//unpkg.com/valine/dist/Valine.min.js></script>
<script type=text/javascript>new Valine({el:"#vcomments",appId:"GbB0g7iuHvLyDClFmsBwewUS-gzGzoHsz",appKey:"cq9Rl1lkMWGfkEoq93b6t3bJ",notify:!0,verify:!0,avatar:"mp",placeholder:"Say something...",visitor:!1})</script></div></main><footer id=footer class=footer><div class=social-links><a href=mailto:&amp;#108;&amp;#109;&amp;#114;&amp;#64;&amp;#101;&amp;#112;&amp;#117;&amp;#114;&amp;#115;&amp;#46;&amp;#99;&amp;#111;&amp;#109; class="iconfont icon-email" title=email></a>
<a href=https://www.epurs.com/index.xml type=application/rss+xml class="iconfont icon-rss" title=rss></a></div><div class=copyright><span class=power-by>ç”± <a class=hexo-link href=https://gohugo.io>Hugo</a> å¼ºåŠ›é©±åŠ¨</span>
<span class=division>|</span>
<span class=theme-info>ä¸»é¢˜ -
<a class=theme-link href=https://github.com/olOwOlo/hugo-theme-even>Even</a></span>
<span class=copyright-year>&copy;
2018 -
2022<span class=heart><i class="iconfont icon-heart"></i></span><span>Fimreal</span>
<a class=theme-link href=http://beian.miit.gov.cn>äº¬ICPå¤‡18059304å·-1</a>
<a href=https://webify.cloudbase.net/>ğŸš€ Powered by CloudBase Webify</a></span></div></footer><div class=back-to-top id=back-to-top><i class="iconfont icon-up"></i></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-138489412-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script>
<script id=baidu_push>(function(){if(window.location.hostname==="localhost")return;var t,n,e=document.createElement("script");e.async=!0,n=window.location.protocol.split(":")[0],n==="https"?e.src="https://zz.bdstatic.com/linksubmit/push.js":e.src="http://push.zhanzhang.baidu.com/push.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script></body></html>